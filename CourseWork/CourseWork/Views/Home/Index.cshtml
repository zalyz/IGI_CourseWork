@model CourseWork.Models.ArticleModels.ArticlesPaginationViewModel
@{
    ViewData["Title"] = "Home Page";
}

<div>
    <form class="d-flex justify-content-between">
        <div class="form-group">
            <label>Title: </label>
            <input name="title" value="@Model.ArticleFilterViewModel.SelectedTitle" class="form-control" />
        </div>
        <div class="form-group">
            <label>Topic: </label>
            <select name="topicId" asp-items="Model.ArticleFilterViewModel.Topics" class="form-control"></select>
        </div>
        <div class="form-group">
            <br />
            <button type="submit" class="btn mt-2 btn-outline-dark">Find</button>
        </div>
    </form>
</div>
<div>
    @for (int i = 0; i < Model.Articles.Count; i++)
    {
        <div class="card mb-3" style="max-width: 100%;">
            <div class="row g-0">
                <div class="col-md-4">
                    <img class="card-img-overlay" style="height: 100%; width: 100%; object-fit:contain;" src="data:image/jpeg;base64,@Convert.ToBase64String(Model.Articles[i].ImageBytes)" alt="ArticleImage">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title"><a class="card-link badge-light" asp-action="ShowArticle" asp-controller="Article" asp-route-articleId="@Model.Articles[i].Id">@Model.Articles[i].Title</a></h5>
                        <p class="card-text">@Model.Articles[i].Text.Substring(0,4)</p>
                    </div>
                    <div class="card-footer d-flex justify-content-between">
                        <ul type="None" class="m-0 p-2 d-sm-flex">
                            <li>@Model.Articles[i].Date.ToString("dd.MM.yyyy HH:mm")</li>
                            <li class="ml-2">@Model.Articles[i].Author.Name</li>
                        </ul>
                        <div>
                            <span><img src="~/eyeIcon.png" alt="Views" /></span>
                            <span>@Model.Articles[i].NumberOfViews</span>
                        </div>
                        <div>
                            <span><img src="~/comments.png" alt="Comments" /></span>
                            <span>@Model.CommentsCount[i]</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
@if (Model.ArticlePageViewModel.HasPreviousPage)
{
    <a asp-action="Index"
       asp-route-page="@(Model.ArticlePageViewModel.PageNumber - 1)"
       asp-route-title="@(Model.ArticleFilterViewModel.SelectedTitle)"
       asp-route-topicId="@(Model.ArticleFilterViewModel.SelectedTopic)"
       class="btn  btn-outline-dark">
        <i class="glyphicon glyphicon-chevron-left"></i>
        Назад
    </a>
}
@if (Model.ArticlePageViewModel.HasNextPage)
{
    <a asp-action="Index"
       asp-route-page="@(Model.ArticlePageViewModel.PageNumber + 1)"
       asp-route-title="@(Model.ArticleFilterViewModel.SelectedTitle)"
       asp-route-topicId="@(Model.ArticleFilterViewModel.SelectedTopic)"
       class="btn btn-outline-dark">
        Вперед
        <i class="glyphicon glyphicon-chevron-right"></i>
    </a>
}